{% extends 'base.html' %}
{% block title %}Track Shipment{% endblock %}

{% block content %}
<div class="container my-5">

    <!-- Header -->
    <div class="text-center mb-5">
        <i class="fa-solid fa-truck-fast display-3 text-primary mb-3"></i>
        <h2 class="fw-bold">Track Your Shipment</h2>
        <p class="text-muted">Real-time delivery status for your order</p>
    </div>

    <!-- Order & Shipment Info -->
    <div class="card border-0 shadow rounded-4 mb-4">
        <div class="card-body p-4">
            <div class="row gy-3">
                <div class="col-md-6">
                    <p class="mb-1"><strong>Order No:</strong> {{ order.order_no }}</p>
                    <p class="mb-1"><strong>Order Date:</strong> {{ order.created_at }}</p>
                    <p class="mb-0"><strong>Total Amount:</strong> â‚¹{{ order.total_amount }}</p>
                </div>
                <div class="col-md-6">
                    <p class="mb-1"><strong>Courier:</strong> {{ shipment.courier_name }}</p>
                    <p class="mb-1"><strong>Tracking ID:</strong> {{ shipment.tracking_id }}</p>
                    <p class="mb-0"><strong>Estimated Delivery:</strong> {{ shipment.estimated_delivery }}</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Timeline -->
    <div class="card border-0 shadow rounded-4 mb-5">
        <div class="card-header bg-dark text-white rounded-top py-3">
            <h5 class="mb-0"><i class="fa-solid fa-clock me-2"></i> Delivery Timeline</h5>
        </div>
        <div class="card-body p-4">

            {% comment %}
                shipment.status ENUM:
                1 = Pending
                2 = Processing
                3 = Shipped
                4 = Out for Delivery
                5 = Delivered
            {% endcomment %}

            <ul class="timeline list-unstyled">
                <li class="d-flex mb-4">
                    <span class="step {% if shipment.status >= 1 %}active{% endif %}"></span>
                    <div class="ms-3">
                        <h6 class="fw-bold">Pending</h6>
                        <p class="text-muted mb-0">Order received and is awaiting processing.</p>
                    </div>
                </li>
                <li class="d-flex mb-4">
                    <span class="step {% if shipment.status >= 2 %}active{% endif %}"></span>
                    <div class="ms-3">
                        <h6 class="fw-bold">Processing</h6>
                        <p class="text-muted mb-0">Products packed and prepared for shipment.</p>
                    </div>
                </li>
                <li class="d-flex mb-4">
                    <span class="step {% if shipment.status >= 3 %}active{% endif %}"></span>
                    <div class="ms-3">
                        <h6 class="fw-bold">Shipped</h6>
                        <p class="text-muted mb-0">Order has been dispatched via courier.</p>
                    </div>
                </li>
                <li class="d-flex mb-4">
                    <span class="step {% if shipment.status >= 4 %}active{% endif %}"></span>
                    <div class="ms-3">
                        <h6 class="fw-bold">Out for Delivery</h6>
                        <p class="text-muted mb-0">Courier is on the way to deliver your order.</p>
                    </div>
                </li>
                <li class="d-flex">
                    <span class="step {% if shipment.status >= 5 %}active{% endif %}"></span>
                    <div class="ms-3">
                        <h6 class="fw-bold">Delivered</h6>
                        <p class="text-muted mb-0">Order delivered successfully.</p>
                    </div>
                </li>
            </ul>

            <style>
                .timeline .step {
                    width: 20px;
                    height: 20px;
                    border-radius: 50%;
                    border: 2px solid #bbb;
                    margin-top: 6px;
                    display: inline-block;
                }
                .timeline .step.active {
                    background: #198754;
                    border-color: #198754;
                }
            </style>
        </div>
    </div>

    <!-- Button -->
    <div class="text-center">
        <a href="{% url 'customer_orders' %}" class="btn btn-primary px-4 py-2">
            <i class="fa-solid fa-arrow-left me-2"></i> Back to Orders
        </a>
    </div>

</div>
{% endblock %}
